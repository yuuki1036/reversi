{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block title %}home{% endblock %}

{% block nav %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <p class="navbar-brand gfont nav-p">welcome! {% if user.is_authenticated %}{{ user }}{% else %}guest{% endif %}</p>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#Navber" aria-controls="Navber" aria-expanded="false"
            aria-label="ナビゲーションの切替">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="Navber">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item"><a class="nav-link" href="{% url 'game:ranking' %}">ランキング</a></li>
                {% if user.is_authenticated %}
                <li class="nav-item"><a class="nav-link" href="{% url 'game:result_list' %}">対戦履歴</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">ログアウト</a></li>
                {% else %}
                <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">ログイン</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'accounts:signup' %}">サインアップ</a></li>
                {% endif %}
                </li>
            </ul>
        </div>
    </nav>
{% endblock %}

{% block content %}
{{ form.certifications.errors }}
　
{% if user.is_authenticated %}
<ul class="List-group status text-center">
    <li class="List-group-item-secondary active gfont">
        your status (VS COM)
    </li>
    <li class="List-group-item gfont">
        play count: {{ user.userprofile.play_count }}
    </li>
    <li class="List-group-item gfont">
        win: {{ user.userprofile.wins }}
    </li>
    <li class="List-group-item gfont">
        lose: {{ user.userprofile.loses }}
    </li>
    <li class="List-group-item gfont">
        hi-score: {{ user.userprofile.hi_score }}
    </li>
</ul>
{% else %}
<p class="text-center">ログインするとゲームの結果が記録されるよ！</p>
{% endif %}


<div class="row">
    <div class="col-12">
        <form method="post">
            {% csrf_token %}
            {{ form|crispy }}
            <div class="text-center">
                <button type="submit" class="btn btn-outline-secondary text-center btn-block gfont">GAME START</button>
            </div>
        </form>
    </div>
</div>

<div class="text-center">
    <a class="text-center" href="{% url 'game:index' %}">タイトルにもどる</a>
</div>


{% endblock %}
